"use strict";
var ProductModel = require('./product');
var Products = (function () {
    function Products(products) {
        var _this = this;
        if (products === void 0) { products = []; }
        this.productsList = new Array();
        products.forEach(function (product) { return _this.productsList.push(product); });
    }
    Products.prototype.list = function () {
        return this.productsList;
    };
    Products.prototype.add = function (productName, productQuantity) {
        var productIds = this.productsList.map(function (product) { return product.getId(); });
        var productId = Math.max.apply(Math, productIds) + 1;
        var product = new ProductModel.Product(productId, productName, productQuantity);
        this.productsList.push(product);
        return this.productsList;
    };
    Products.prototype.delete = function (productId) {
        var deleted = false;
        this.productsList = this.productsList.filter(function (product) {
            deleted = deleted || product.getId() === productId;
            return product.getId() !== productId;
        });
        return deleted;
    };
    Products.prototype.fetch = function (productId) {
        return productId && this.productsList.filter(function (product) { return product.getId() === productId; }).shift();
    };
    Products.prototype.find = function (productQuery) {
        var productId = parseInt(productQuery);
        productQuery = productQuery.toLowerCase();
        return this.productsList.filter(function (product) { return product.getId() === productId
            || product.getName().toLowerCase() === productQuery; }).shift();
    };
    return Products;
}());
exports.Products = Products;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsL3Byb2R1Y3RzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFZLFlBQVksV0FBTSxXQUU5QixDQUFDLENBRndDO0FBRXpDO0lBRUksa0JBQVksUUFBMEM7UUFGMUQsaUJBK0NDO1FBN0NlLHdCQUEwQyxHQUExQyxhQUEwQztRQUNsRCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksS0FBSyxFQUF3QixDQUFDO1FBQ3RELFFBQVEsQ0FBQyxPQUFPLENBQ1osVUFBQyxPQUFPLElBQUssT0FBQSxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBL0IsQ0FBK0IsQ0FDL0MsQ0FBQztJQUNOLENBQUM7SUFDTSx1QkFBSSxHQUFYO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDN0IsQ0FBQztJQUNNLHNCQUFHLEdBQVYsVUFBVyxXQUFtQixFQUFFLGVBQXVCO1FBRW5ELElBQUksVUFBVSxHQUFrQixJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FDakQsVUFBQyxPQUFPLElBQUssT0FBQSxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQWYsQ0FBZSxDQUMvQixDQUFDO1FBQ0YsSUFBSSxTQUFTLEdBQVcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLEVBQVEsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXBELElBQUksT0FBTyxHQUFHLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsV0FBVyxFQUFFLGVBQWUsQ0FBQyxDQUFDO1FBRWhGLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzdCLENBQUM7SUFDTSx5QkFBTSxHQUFiLFVBQWMsU0FBaUI7UUFFN0IsSUFBSSxPQUFPLEdBQVksS0FBSyxDQUFDO1FBQzdCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQzFDLFVBQUMsT0FBNkI7WUFDNUIsT0FBTyxHQUFHLE9BQU8sSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssU0FBUyxDQUFDO1lBQ25ELE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssU0FBUyxDQUFBO1FBQ3RDLENBQUMsQ0FDRixDQUFBO1FBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBQ00sd0JBQUssR0FBWixVQUFhLFNBQWlCO1FBQzFCLE1BQU0sQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQ3hDLFVBQUMsT0FBNkIsSUFBSyxPQUFBLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxTQUFTLEVBQTdCLENBQTZCLENBQ25FLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDZCxDQUFDO0lBQ00sdUJBQUksR0FBWCxVQUFZLFlBQW9CO1FBQzlCLElBQUksU0FBUyxHQUFXLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMvQyxZQUFZLEdBQUcsWUFBWSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FDM0IsVUFBQyxPQUE2QixJQUFLLE9BQUEsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLFNBQVM7ZUFDN0QsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLFdBQVcsRUFBRSxLQUFLLFlBQVksRUFEaEIsQ0FDZ0IsQ0FDdEQsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFDTCxlQUFDO0FBQUQsQ0EvQ0EsQUErQ0MsSUFBQTtBQS9DWSxnQkFBUSxXQStDcEIsQ0FBQSIsImZpbGUiOiJtb2RlbC9wcm9kdWN0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFByb2R1Y3RNb2RlbCBmcm9tICcuL3Byb2R1Y3QnXHJcblxyXG5leHBvcnQgY2xhc3MgUHJvZHVjdHMge1xyXG4gICAgcHJpdmF0ZSBwcm9kdWN0c0xpc3Q6IEFycmF5PFByb2R1Y3RNb2RlbC5Qcm9kdWN0PjtcclxuICAgIGNvbnN0cnVjdG9yKHByb2R1Y3RzOiBBcnJheTxQcm9kdWN0TW9kZWwuUHJvZHVjdD4gPSBbXSkge1xyXG4gICAgICAgIHRoaXMucHJvZHVjdHNMaXN0ID0gbmV3IEFycmF5PFByb2R1Y3RNb2RlbC5Qcm9kdWN0PigpO1xyXG4gICAgICAgIHByb2R1Y3RzLmZvckVhY2goXHJcbiAgICAgICAgICAgIChwcm9kdWN0KSA9PiB0aGlzLnByb2R1Y3RzTGlzdC5wdXNoKHByb2R1Y3QpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBsaXN0KCk6IEFycmF5PFByb2R1Y3RNb2RlbC5Qcm9kdWN0PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdHNMaXN0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFkZChwcm9kdWN0TmFtZTogc3RyaW5nLCBwcm9kdWN0UXVhbnRpdHk6IG51bWJlcik6IEFycmF5PFByb2R1Y3RNb2RlbC5Qcm9kdWN0PiB7XHJcblxyXG4gICAgICAgIGxldCBwcm9kdWN0SWRzOiBBcnJheTxudW1iZXI+ID0gdGhpcy5wcm9kdWN0c0xpc3QubWFwKFxyXG4gICAgICAgICAgICAocHJvZHVjdCkgPT4gcHJvZHVjdC5nZXRJZCgpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgcHJvZHVjdElkOiBudW1iZXIgPSBNYXRoLm1heCguLi5wcm9kdWN0SWRzKSArIDE7XHJcblxyXG4gICAgICAgIGxldCBwcm9kdWN0ID0gbmV3IFByb2R1Y3RNb2RlbC5Qcm9kdWN0KHByb2R1Y3RJZCwgcHJvZHVjdE5hbWUsIHByb2R1Y3RRdWFudGl0eSk7XHJcblxyXG4gICAgICAgIHRoaXMucHJvZHVjdHNMaXN0LnB1c2gocHJvZHVjdCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdHNMaXN0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGRlbGV0ZShwcm9kdWN0SWQ6IG51bWJlcik6IEJvb2xlYW5cclxuICAgIHtcclxuICAgICAgbGV0IGRlbGV0ZWQ6IEJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgdGhpcy5wcm9kdWN0c0xpc3QgPSB0aGlzLnByb2R1Y3RzTGlzdC5maWx0ZXIoXHJcbiAgICAgICAgKHByb2R1Y3Q6IFByb2R1Y3RNb2RlbC5Qcm9kdWN0KSA9PiB7XHJcbiAgICAgICAgICBkZWxldGVkID0gZGVsZXRlZCB8fCBwcm9kdWN0LmdldElkKCkgPT09IHByb2R1Y3RJZDtcclxuICAgICAgICAgIHJldHVybiBwcm9kdWN0LmdldElkKCkgIT09IHByb2R1Y3RJZFxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgICByZXR1cm4gZGVsZXRlZDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBmZXRjaChwcm9kdWN0SWQ6IG51bWJlcik6IFByb2R1Y3RNb2RlbC5Qcm9kdWN0IHtcclxuICAgICAgICByZXR1cm4gcHJvZHVjdElkICYmIHRoaXMucHJvZHVjdHNMaXN0LmZpbHRlcihcclxuICAgICAgICAgICAgKHByb2R1Y3Q6IFByb2R1Y3RNb2RlbC5Qcm9kdWN0KSA9PiBwcm9kdWN0LmdldElkKCkgPT09IHByb2R1Y3RJZFxyXG4gICAgICAgICkuc2hpZnQoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBmaW5kKHByb2R1Y3RRdWVyeTogc3RyaW5nKTogUHJvZHVjdE1vZGVsLlByb2R1Y3Qge1xyXG4gICAgICBsZXQgcHJvZHVjdElkOiBudW1iZXIgPSBwYXJzZUludChwcm9kdWN0UXVlcnkpO1xyXG4gICAgICBwcm9kdWN0UXVlcnkgPSBwcm9kdWN0UXVlcnkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdHNMaXN0LmZpbHRlcihcclxuICAgICAgICAgIChwcm9kdWN0OiBQcm9kdWN0TW9kZWwuUHJvZHVjdCkgPT4gcHJvZHVjdC5nZXRJZCgpID09PSBwcm9kdWN0SWRcclxuICAgICAgICAgIHx8IHByb2R1Y3QuZ2V0TmFtZSgpLnRvTG93ZXJDYXNlKCkgPT09IHByb2R1Y3RRdWVyeVxyXG4gICAgICApLnNoaWZ0KCk7XHJcbiAgICB9XHJcbn1cclxuIl19
